<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="view_freight_move_form_inherited" model="ir.ui.view">
            <field name="name">account.move.form.inherited</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">

                <xpath expr="//div[@name='button_box']" position="inside">
                    <field name="project_task_id" invisible="1"/>
                    <button name="action_open_project_task" type="object" invisible="not project_task_id"
                            class="oe_stat_button" icon="fa-tasks">
                        <field name="project_task_id" widget="statinfo" string="Operation"/>
                    </button>
                </xpath>
                <xpath expr="//form" position="attributes">
                    <attribute name="create">0</attribute>
                    <attribute name="delete">false</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="options">{'no_edit': True, 'no_create': True,'no_open': True}</attribute>
                    <attribute name="readonly">is_freight</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_shipping_id']" position="attributes">
                    <attribute name="options">{'no_edit': True, 'no_create': True,'no_open': True}</attribute>
                    <attribute name="readonly">is_freight</attribute>
                </xpath>
                <xpath expr="//group[@id='header_right_group']/field[@name='currency_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//group[@name='accounting_info_group']/field[@name='invoice_incoterm_id']"
                       position="attributes">
                    <attribute name="options">{'no_edit': True, 'no_create': True,'no_open': True}</attribute>
                </xpath>
                <xpath expr="//group[@name='accounting_info_group']/field[@name='fiscal_position_id']"
                       position="attributes">
                    <attribute name="options">{'no_edit': True, 'no_create': True,'no_open': True}</attribute>
                </xpath>

                <xpath expr="//group[@id='header_right_group']" position="after">
                        <field name="show_packages" invisible="1"/>
                        <field name="show_containers" invisible="1"/>
                        <field name="invoice_nature"/>
                </xpath>
                <xpath expr="//group[@name='accounting_info_group']" position="inside">
                    <field name="is_freight" readonly="1"/>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='product_id']" position="replace">
                    <field name="product_id" string="Charge Type" column_invisible="not parent.is_freight"
                           readonly="parent.is_freight"/>
                    <field name="product_id" string="Product" column_invisible="parent.is_freight"
                           readonly="not parent.is_freight"/>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="replace">
                    <field name="quantity" optional="show" readonly="parent.is_freight"/>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='price_unit']" position="replace">
                    <field name="price_unit" string="Price" readonly="parent.is_freight"/>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='name']" position="replace">
                    <field name="package_type_id"
                           column_invisible="not parent.show_packages" readonly="1"
                           options="{'no_edit': True, 'no_create': True,'no_open': True}"
                           optional="hide"/>
                    <field name="container_type_id"
                           column_invisible="not parent.show_containers" readonly="1"
                           options="{'no_edit': True, 'no_create': True,'no_open': True}"
                           optional="hide"/>
                </xpath>
            </field>
        </record>
        <record id="view_account_move_filter_inherit" model="ir.ui.view">
            <field name="name">account.move.select.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_move_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <filter string="Taxable" name="invoice_nature" domain="[('invoice_nature', '=', 'taxable')]"/>
                    <filter string="Non-Taxable" name="invoice_nature"
                            domain="[('invoice_nature', '=', 'nontaxable')]"/>
                    <separator/>
                    <filter name="archived" string="Canceled" domain="[('active', '=', False)]"/>
                    <separator/>
                </xpath>
                <xpath expr="//group" position="inside">
                    <filter string="Invoice Nature" name="by_invoice_nature" domain="[]"
                            context="{'group_by': 'invoice_nature'}"/>
                </xpath>
            </field>
        </record>


        <record id="view_freight_invoice_tree" model="ir.ui.view">
            <field name="name">account.invoice.freight.tree</field>
            <field name="model">account.move</field>
            <field name="arch" type="xml">
                <tree string="Invoices" create="0" delete="0"
                      decoration-info="state == 'draft'"
                      decoration-muted="state == 'cancel'">
                    <field name="made_sequence_hole" column_invisible="True"/>
                    <field name="name" decoration-bf="1" decoration-danger="made_sequence_hole"/>
                    <field name="invoice_partner_display_name"
                           column_invisible="context.get('default_move_type') not in ('in_invoice', 'in_refund', 'in_receipt')"
                           groups="base.group_user" string="Vendor"/>
                    <field name="invoice_partner_display_name"
                           column_invisible="context.get('default_move_type') not in ('out_invoice', 'out_refund', 'out_receipt')"
                           groups="base.group_user" string="Customer"/>
                    <field name="invoice_date" optional="show"
                           column_invisible="context.get('default_move_type') not in ('in_invoice', 'in_refund', 'in_receipt')"
                           readonly="state != 'draft'" string="Bill Date"/>
                    <field name="invoice_date" optional="show"
                           column_invisible="context.get('default_move_type') not in ('out_invoice', 'out_refund', 'out_receipt')"
                           readonly="state != 'draft'" string="Invoice Date"/>
                    <field name="date" optional="hide" string="Accounting Date"
                           readonly="state in ['cancel', 'posted']"/>
                    <field name="invoice_date_due" widget="remaining_days" optional="show"
                           invisible="payment_state in ('paid', 'in_payment', 'reversed') or state == 'cancel'"/>
                    <field name="invoice_origin" optional="hide" string="Source Document"/>
                    <field name="payment_reference" optional="hide"
                           column_invisible="context.get('default_move_type') in ('out_invoice', 'out_refund', 'out_receipt')"/>
                    <field name="ref" optional="hide"/>
                    <field name="invoice_user_id" optional="hide"
                           column_invisible="context.get('default_move_type') not in ('out_invoice', 'out_refund', 'out_receipt')"
                           string="Salesperson" widget="many2one_avatar_user"/>
                    <field name="activity_ids" widget="list_activity" optional="show"/>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"
                           optional="hide"/>
                    <field name="company_id" groups="!base.group_multi_company" column_invisible="True"/>
                    <field name="amount_untaxed_signed" string="Tax Excluded" sum="Total" optional="show"/>
                    <field name="amount_tax_signed" string="Tax" sum="Total" optional="hide"/>
                    <field name="amount_total_signed" string="Total" sum="Total" decoration-bf="1" optional="show"/>
                    <field name="amount_total_in_currency_signed" string="Total in Currency" optional="show"
                           groups="base.group_multi_currency"/>
                    <field name="amount_total_in_currency_signed" string="Total in Currency" optional="hide"
                           groups="!base.group_multi_currency"/>
                    <field name="amount_residual_signed" string="Amount Due" sum="Amount Due" optional="hide"/>
                    <field name="currency_id" optional="hide" readonly="state in ['cancel', 'posted']"/>
                    <field name="company_currency_id" column_invisible="True"/>
                    <field name="is_freight" column_invisible="True"/>
                    <field name="to_check" optional="hide" widget="boolean_toggle"/>
                    <field name="payment_state"
                           string="Payment"
                           widget="badge"
                           decoration-danger="payment_state == 'not_paid'"
                           decoration-warning="payment_state in ('partial', 'in_payment')"
                           decoration-success="payment_state in ('paid', 'reversed')"
                           invisible="payment_state == 'invoicing_legacy' or state != 'posted' or move_type == 'entry'"
                           optional="show"/>
                    <field name="state" widget="badge" decoration-success="state == 'posted'"
                           decoration-info="state == 'draft'" optional="show"/>
                    <field name="move_type" column_invisible="context.get('default_move_type', True)"/>
                </tree>
            </field>
        </record>

        <record id="action_freight_move_out_invoice_type" model="ir.actions.act_window">
            <field name="name">Freight Invoices</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form,activity</field>
            <field name="search_view_id" ref="view_account_move_filter_inherit"/>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_freight_invoice_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_freight_move_form_inherited')}),
            ]"/>
            <field name="domain">[('move_type', '=', 'out_invoice'), ('is_freight', '=', True)]
            </field>
            <field name="context">{'default_move_type': 'out_invoice', 'default_is_freight': True}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a customer invoice
                </p>
                <p>
                    Create invoices, register payments and keep track of the discussions with your customers.
                </p>
            </field>
        </record>

        <record id="action_freight_move_in_invoice_type" model="ir.actions.act_window">
            <field name="name">Freight Bills</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,kanban,form,activity</field>
            <field name="search_view_id" ref="view_account_move_filter_inherit"/>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_freight_invoice_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_freight_move_form_inherited')}),
            ]"/>
            <field name="domain">[('move_type', '=', 'in_invoice'), ('is_freight', '=', True)]
            </field>
            <field name="context">{'default_move_type': 'in_invoice', 'default_is_freight': True,
                'display_account_trust': True}
            </field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create a vendor bill
                </p>
                <p>
                    Create vendor bills, register payments and keep track of the discussions with your vendors.
                </p>
            </field>
        </record>


        <record id="account.action_move_journal_line" model="ir.actions.act_window">
            <field name="search_view_id" ref="view_account_move_filter_inherit"/>
        </record>

        <record id="account.action_move_out_invoice_type" model="ir.actions.act_window">
            <field name="search_view_id" ref="view_account_move_filter_inherit"/>
            <field name="domain">[('move_type', '=', 'out_invoice')]</field>
        </record>
        <record id="account.action_move_in_invoice_type" model="ir.actions.act_window">
            <field name="search_view_id" ref="view_account_move_filter_inherit"/>
            <field name="domain">[('move_type', '=', 'in_invoice')]</field>
        </record>
        <record id="view_move_form_inherit_purchase_update" model="ir.ui.view">
            <field name="name">account.move.inherit.purchase.update</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <!-- Make the purchase_vendor_bill_id field invisible -->
                <xpath expr="//field[@name='purchase_vendor_bill_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- Make the label for purchase_vendor_bill_id invisible -->
                <xpath expr="//label[@for='purchase_vendor_bill_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

    </data>
</odoo>