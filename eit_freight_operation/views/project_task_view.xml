<odoo>

    <data>
        <record id="task_sequence" model="ir.sequence">
            <field name="name">Task</field>
            <field name="code">project.task</field>
            <field name="active">TRUE</field>
            <field name="prefix">X</field>
            <field name="padding">4</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
        </record>
        <record id="house_bl_sequence" model="ir.sequence">
            <field name="name">House B/L</field>
            <field name="code">house.bl.seq</field>
            <field name="active">TRUE</field>
            <field name="prefix">/%(year)s/HBL</field>
            <field name="padding">4</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
            <field name="use_date_range">TRUE</field>
        </record>
        <record id="consolidation_sequence" model="ir.sequence">
            <field name="name">Consolidation</field>
            <field name="code">consolidation.seq</field>
            <field name="active">TRUE</field>
            <field name="prefix">CNS</field>
            <field name="padding">4</field>
            <field name="number_next">1</field>
            <field name="number_increment">1</field>
            <field name="use_date_range">TRUE</field>
        </record>


        <record id="project_task_view_planned_date_form" model="ir.ui.view">
            <field name="name">project.task.view.form.inherit.planned.date</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project_enterprise.project_task_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//label[@for='date_deadline'][2]" position="attributes">
                    <attribute name="string">Expected Date</attribute>
                </xpath>
            </field>
        </record>

        <record id="inherit_open_view_all_tasks_list_view" model="ir.ui.view">
            <field name="name">"inherit.open.view.all.tasks.list.view</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.open_view_all_tasks_list_view"/>
            <field name="arch" type="xml">
                <xpath expr="//tree[1]" position="attributes">
                    <attribute name="create">false</attribute>
                </xpath>

                <xpath expr="//tree[1]/field[@name='name']" position="attributes">
                    <attribute name="string">Operation ID</attribute>
                </xpath>
                <xpath expr="//tree[1]/field[@name='state']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='project_id']" position="attributes">
                    <attribute name="string">Customer</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="replace">
                </xpath>
                <xpath expr="//field[@name='my_activity_date_deadline']" position="replace">
                </xpath>
                <xpath expr="//field[@name='personal_stage_type_id']" position="replace">
                    <field name="closing_stage_id" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='user_ids']" position="attributes">
                    <attribute name="string">Executors</attribute>
                </xpath>

                <xpath expr="//field[@name='tag_ids']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='date_deadline']" position="attributes">
                    <attribute name="string">Expected Date</attribute>
                </xpath>

                <xpath expr="//field[@name='project_id']" position="after">
                    <field name="transport_type_id" optional="show" string="Type"/>
                    <field name="master_bl" optional="show"/>
                    <field name="port_id" optional="show"/>
                    <field name="port_id_pod" optional="show"/>
                    <field name="vessel_id" optional="hide"/>
                    <field name="clearence_type_id" optional="hide"/>
                    <field name="service_scope_ids" widget="many2many_tags" optional="hide"/>
                </xpath>

                <xpath expr="//field[@name='stage_id']" position="attributes">
                    <attribute name="widget">badge</attribute>
                    <attribute name="decoration-success">stage_id == 1</attribute>
                    <attribute name="decoration-info">stage_id == 2</attribute>
                    <attribute name="decoration-warning">stage_id == 4</attribute>
                    <attribute name="decoration-muted">stage_id == closing_stage_id</attribute>
                </xpath>
            </field>
        </record>

        <record id="operation_inherit_view_task_kanban" model="ir.ui.view">
            <field name="name">operation.project.task.kanban</field>
            <field name="model">project.task</field>
            <field name="arch" type="xml">
                <kanban
                        class="o_kanban_small_column o_kanban_project_tasks"
                        quick_create_view="project.quick_create_task_form"
                        records_draggable="false"
                        groups_draggable="false"
                        examples="project"
                        js_class="project_task_kanban" sample="1"
                        default_order="priority desc, sequence, state, date_deadline asc, id desc"
                >
                    <field name="color"/>
                    <field name="priority"/>
                    <field name="stage_id" options='{"group_by_tooltip": {"description": "Description"}}'/>
                    <field name="user_ids"/>
                    <field name="partner_id"/>
                    <field name="sequence"/>
                    <field name="displayed_image_id"/>
                    <field name="active"/>
                    <field name="activity_ids"/>
                    <field name="activity_state"/>
                    <field name="rating_count"/>
                    <field name="rating_avg"/>
                    <field name="rating_active"/>
                    <field name="has_late_and_unreached_milestone"/>
                    <field name="allow_milestones"/>
                    <field name="state"/>
                    <field name="company_id"/>
                    <field name="recurrence_id"/>
                    <field name="subtask_count"/>
                    <field name="closed_subtask_count"/>
                    <field name="subtask_count"/>
                    <field name="closing_stage_id" invisible="1"/>
                    <progressbar field="state"
                                 colors='{"1_done": "success-done", "1_canceled": "danger", "03_approved": "success", "02_changes_requested": "warning", "04_waiting_normal": "info", "01_in_progress": "200" }'/>
                    <templates>
                        <t t-name="kanban-menu" t-if="!selection_mode" groups="base.group_user">
                            <a t-if="widget.editable" role="menuitem" type="set_cover" class="dropdown-item"
                               data-field="displayed_image_id">Set Cover Image
                            </a>
                            <a name="%(portal.portal_share_action)d" role="menuitem" type="action" class="dropdown-item"
                               context="{'dialog_size': 'medium'}">Share
                            </a>
                            <div role="separator" class="dropdown-divider"></div>
                            <ul class="oe_kanban_colorpicker" data-field="color"/>
                        </t>
                        <t t-name="kanban-box">
                            <div t-attf-class="{{!selection_mode ? 'oe_kanban_color_' + kanban_getcolor(record.color.raw_value) : ''}} oe_kanban_card oe_kanban_global_click">
                                <div class="oe_kanban_content">
                                    <div class="o_kanban_record_top"
                                         t-att-class="['1_done', '1_canceled'].includes(record.state.raw_value) ? 'opacity-50' : ''">
                                        <div class="o_kanban_record_headings text-muted">
                                            <strong class="o_kanban_record_title">
                                                <s t-if="!record.active.raw_value">
                                                    <field name="name"/>
                                                </s>
                                                <t t-else="">
                                                    <field name="name"/>
                                                </t>
                                            </strong>
                                            <span t-if="record.parent_id.raw_value"
                                                  invisible="context.get('default_parent_id', False)"
                                                  style="display: block; margin-top: 4px;">
                                                <field name="parent_id"/>
                                            </span>
                                            <span style="display: block; margin-top: 4px;">
                                                <field name="project_id" options="{'no_open': True}"/>
                                            </span>
                                            <span style="display: block; margin-top: 4px;">
                                                <field name="transport_type_id" optional="show" string="Type"/>
                                            </span>
                                            <span style="display: block; margin-top: 4px;">
                                                <field name="clearence_type_id" display="full"/>
                                            </span>
                                            <span style="display: block; margin-top: 4px;">
                                                <field name="port_id" display="full"/>
                                            </span>
                                            <span style="display: block; margin-top: 4px;">
                                                <field name="port_id_pod" display="full"/>
                                            </span>
                                            <span t-if="record.partner_id.value" invisible="1"
                                                  style="display: block; margin-top: 4px;">
                                                <field name="partner_id"/>
                                            </span>
                                            <span t-if="record.allow_milestones.raw_value and record.milestone_id.raw_value"
                                                  t-att-class="record.has_late_and_unreached_milestone.raw_value and !record.state.raw_value.startsWith('1_') ? 'text-danger' : ''"
                                                  style="display: block; margin-top: 4px;">
                                                <field name="milestone_id" options="{'no_open': True}"/>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="o_kanban_record_body"
                                         t-att-class="['1_done', '1_canceled'].includes(record.state.raw_value) ? 'opacity-50' : 'text-muted'">
                                        <div t-if="record.date_deadline.raw_value" name="date_deadline"
                                             invisible="state in ['1_done', '1_canceled']">
                                            <field name="date_deadline" widget="remaining_days"/>
                                        </div>
                                        <field name="task_properties" widget="properties"/>
                                        <div t-if="record.displayed_image_id.value">
                                            <field name="displayed_image_id" widget="attachment_image"/>
                                        </div>
                                    </div>
                                    <div class="o_kanban_record_bottom" t-if="!selection_mode">
                                        <div class="oe_kanban_bottom_left"
                                             t-att-class="['1_done', '1_canceled'].includes(record.state.raw_value) ? 'opacity-50' : ''">
                                            <field name="priority" widget="priority" style="margin-right: 5px;"/>
                                            <field name="activity_ids" widget="kanban_activity"
                                                   style="padding-top: 1.5px; margin-right: 2px"/>
                                            <b t-if="record.rating_active.raw_value and record.rating_count.raw_value &gt; 0"
                                               groups="project.group_project_rating">
                                                <span class="fa fa-fw fa-smile-o text-success rating_face"
                                                      t-if="record.rating_avg.raw_value &gt;= 3.66"
                                                      title="Average Rating: Satisfied" role="img"
                                                      aria-label="Happy face"/>
                                                <span class="fa fa-fw fa-meh-o text-warning rating_face"
                                                      t-elif="record.rating_avg.raw_value &gt;= 2.33"
                                                      title="Average Rating: Okay" role="img"
                                                      aria-label="Neutral face"/>
                                                <span class="fa fa-fw fa-frown-o text-danger rating_face" t-else=""
                                                      title="Average Rating: Dissatisfied" role="img"
                                                      aria-label="Sad face"/>
                                            </b>
                                            <a t-if="!record.project_id.raw_value" class="text-muted"
                                               style="font-size: 17px; padding-top: 1.5px; margin-left: 1.5px">
                                                <i title="Private Task" class="fa fa-lock"/>
                                            </a>
                                            <t t-if="record.project_id.raw_value and record.subtask_count.raw_value">
                                                <a t-if="record.project_id.raw_value and record.subtask_count.raw_value and record.subtask_count.value &gt; record.closed_subtask_count.value"
                                                   t-attf-title="{{ record.closed_subtask_count.value }} sub-tasks closed out of {{ record.subtask_count.value }}"
                                                   class="subtask_list_button btn-link text-dark"
                                                   role="button">
                                                    <span class="fa fa-check-square-o me-1"/>
                                                    <t t-out="record.closed_subtask_count.value + '/' + record.subtask_count.value"/>
                                                </a>
                                                <div t-else=""
                                                     t-attf-title="{{ record.closed_subtask_count.value }} sub-tasks closed out of {{ record.subtask_count.value }}"
                                                     class="text-muted">
                                                    <span class="fa fa-check-square-o me-1"/>
                                                    <t t-out="record.closed_subtask_count.value + '/' + record.subtask_count.value"/>
                                                </div>
                                            </t>
                                        </div>
                                        <div class="oe_kanban_bottom_right" t-if="!selection_mode">
                                            <div t-att-class="['1_done', '1_canceled'].includes(record.state.raw_value) ? 'opacity-50' : ''">
                                                <field name="user_ids" widget="many2many_avatar_user"/>
                                            </div>
                                            <field name="state_selectable" widget="badge"
                                                   decoration-success="stage_id == 1"
                                                   decoration-info="stage_id == 2" decoration-warning="stage_id == 4"
                                                   decoration-muted="stage_id == closing_stage_id"/>
                                        </div>
                                    </div>
                                    <t t-if="record.project_id.raw_value and record.subtask_count.raw_value and record.subtask_count.raw_value &gt; record.closed_subtask_count.raw_value">
                                        <div class="kanban_bottom_subtasks_section"/>
                                    </t>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <record id="inherit_view_task_search_form" model="ir.ui.view">
            <field name="name">"inherit.view.task.search.form</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_search_form"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='project_id']" position="replace">
<!--                    <field name="opt_partners_lines.partner_id" string="Partners"/>-->

                </xpath>
                <xpath expr="//filter[@name='my_tasks']" position="attributes">
                    <attribute name="string">My Operations</attribute>
                </xpath>
                <xpath expr="//filter[@name='starred_tasks']" position="attributes">
                    <attribute name="string">Starred Operations</attribute>
                </xpath>
                <xpath expr="//filter[@name='open_tasks']" position="attributes">
                    <attribute name="string">Open Operations</attribute>
                </xpath>
                <xpath expr="//filter[@name='closed_tasks']" position="attributes">
                    <attribute name="string">Closed Operations</attribute>
                </xpath>

                <xpath expr="//filter[@name='date_deadline']" position="replace"/>
                <xpath expr="//filter[@name='favorite_projects']" position="replace"/>
                <xpath expr="//filter[@name='private_tasks']" position="replace"/>
                <xpath expr="//field[@name='task_properties']" position="after">
                    <filter domain="[('transport_type_id', '=', 2)]" name="transport_type_id" string="Sea"/>
                    <filter domain="[('transport_type_id', '=', 1)]" name="transport_type_id" string="Air"/>
                    <filter domain="[('transport_type_id', '=', 3)]" name="transport_type_id" string="Inland"/>
                </xpath>

                <xpath expr="//filter[@name='deadline']" position="replace"/>
                <xpath expr="//filter[@name='project']" position="replace"/>
                <xpath expr="//filter[@name='user']" position="attributes">
                    <attribute name="string">Executors</attribute>
                </xpath>

                <xpath expr="//filter[@name='user']" position="after">
                    <filter name="studio_group_by_9t_1hvig3l5h" string="Transport Type"
                            context="{'group_by': 'transport_type_id'}"/>
                    <filter name="studio_group_by_2oj_1hvig430f" string="Direction"
                            context="{'group_by': 'clearence_type_id'}"/>
                    <filter name="studio_group_by_34l_1hvig52f3" string="Shipment Scope"
                            context="{'group_by': 'shipment_scope_id'}"/>
                </xpath>

                <xpath expr="//search[1]/field[@name='name']" position="after">
                    <field name="port_id"/>
                    <field name="port_id_pod"/>
                    <field name="master_bl"/>
                    <field name="commodity_id"/>
                    <field name="shipping_container_ids" string="Container Number"/>
                </xpath>
            </field>
        </record>

        <!-- Update the Action View Mode for Projects -->
        <record id="project.open_view_project_all" model="ir.actions.act_window">
            <field name="name">Profiles</field>
            <field name="view_mode">tree,kanban,form</field>
            <field name="view_id" ref="project.view_project"/>
        </record>

        <record id="account.menu_finance" model="ir.ui.menu">
            <field name="groups_id"
                   eval="[(6, 0, [ref('account.group_account_manager'), ref('account.group_account_user')])]"/>
        </record>

        <record id="project.menu_main_pm" model="ir.ui.menu">
            <field name="web_icon">eit_freight_operation,static/description/icon.png</field>
            <field name="name">Operation</field>
        </record>

        <record id="project.menu_project_management_all_tasks" model="ir.ui.menu">
            <field name="name">Customers</field>
            <field name="parent_id" ref="project.menu_main_pm"/> <!-- Update parent menu -->
            <field name="sequence">1</field> <!-- Update sequence -->
        </record>

        <record id="menu_operations" model="ir.ui.menu">
            <field name="name">Operations</field>
            <field name="parent_id" ref="project.menu_project_management_all_tasks"/> <!-- Update parent menu -->
            <field name="action" ref="project.action_view_all_task"/> <!-- Update action -->
            <field name="sequence">1</field> <!-- Update sequence -->
        </record>

        <delete model="ir.actions.act_window.view" id="project.open_view_all_task_list_kanban"/>

        <record id="operation_open_view_all_task_list_tree" model="ir.actions.act_window.view">
            <field name="sequence" eval="20"/>
            <field name="view_mode">kanban</field>
            <field name="act_window_id" ref="project.action_view_all_task"/>
            <field name="view_id" ref="operation_inherit_view_task_kanban"/>
        </record>

        <record id="menu_main_customer_profiles" model="ir.ui.menu">
            <field name="name">Profiles</field>
            <field name="parent_id" ref="project.menu_projects"/>
            <field name="sequence">3</field>
        </record>

        <record id="project.menu_projects" model="ir.ui.menu">
            <field name="name">Accounting</field>
            <field name="sequence">2</field>
        </record>

        <record id="menu_customer_profiles" model="ir.ui.menu">
            <field name="name">Customer Profiles</field>
            <field name="action" ref="project.open_view_project_all"/>
            <field name="parent_id" ref="project.menu_project_management_all_tasks"/>
            <field name="sequence">2</field>
        </record>

        <record id="menu_customer_contacts" model="ir.ui.menu">
            <field name="name">Partners</field>
            <field name="action" ref="contacts.action_contacts"/>
            <field name="parent_id" ref="project.menu_projects"/>
            <field name="sequence">4</field>
        </record>

        <record id="menu_freight_customer_invoices" model="ir.ui.menu">
            <field name="name">Invoices</field>
            <field name="action" ref="action_freight_move_out_invoice_type"/>
            <field name="parent_id" ref="project.menu_projects"/>
            <field name="sequence">2</field>
        </record>

        <record id="menu_freight_customer_bills" model="ir.ui.menu">
            <field name="name">Bills</field>
            <field name="action" ref="action_freight_move_in_invoice_type"/>
            <field name="parent_id" ref="project.menu_projects"/>
            <field name="sequence">3</field>
        </record>

        <record id="project.menu_project_report_task_analysis" model="ir.ui.menu">
            <field name="name">Operations Analysis</field>
        </record>

        <record id="project.menu_project_config_project" model="ir.ui.menu">
            <field name="name">Operations Stages</field>
        </record>

        <record id="project.menu_project_management" model="ir.ui.menu">
            <field name="active">False</field>
        </record>
        <record id="project.act_project_project_2_project_task_all" model="ir.actions.act_window">
            <field name="name">Operations</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Operations found. Let's create one!
                </p>
                <p>
                    Keep track of the progress of your Operations from creation to completion.
                    <br/>
                    Collaborate efficiently by chatting in real-time or via email.
                </p>
            </field>
        </record>
        <record id="project.action_view_all_task" model="ir.actions.act_window">
            <field name="name">Operations</field>
            <field name="view_mode">kanban,tree,form,gantt,calendar,pivot,graph,activity</field>
            <field name="domain">[('project_id', '!=', False)]</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No Operations found. Let's create one!
                </p>
                <p>
                    Organize your oeprations by dispatching them across the pipeline.
                    <br/>
                    Collaborate efficiently by chatting in real-time or via email.
                </p>
            </field>
        </record>

        <!-- Inactive Projects Menu under configuration -->
        <data>
            <function model="ir.ui.menu" name="write">
                <value eval="[ref('project.menu_projects_config')]"/>
                <value eval="{'active': False}"/>
            </function>

        </data>

        <record id="project.menu_projects_config_group_stage" model="ir.ui.menu">
            <field name="active">False</field>
        </record>
    </data>

</odoo>